// Generated by CoffeeScript 2.4.1
var ass, bearing, degrees, distance, getParameters, map, myRound, radians, range;

range = _.range;

ass = function(a, b = true) {
  return chai.assert.deepEqual(a, b);
};

myRound = function(x, dec = 0) {
  return Math.round(x * 10 ** dec) / 10 ** dec;
};

ass(50, myRound(47, -1));

map = function(x, x0, x1, y0, y1) {
  return (x - x0) / (x1 - x0) * (y1 - y0) + y0;
};

ass(325, map(150, 100, 200, 300, 350));

ass(375, map(250, 100, 200, 300, 350));

degrees = function(x) {
  return x * 180 / Math.PI;
};

radians = function(x) {
  return x * Math.PI / 180;
};

distance = function(p, q) {
  var dx, dy;
  if (p.length !== 2 || q.length !== 2) {
    return 0;
  }
  dx = p[0] - q[0];
  dy = p[1] - q[1];
  return Math.sqrt(dx * dx + dy * dy);
};

bearing = function(p, q) {
  var dx, dy, res;
  if (p.length !== 2 || q.length !== 2) {
    return 0;
  }
  dx = q[0] - p[0];
  dy = q[1] - p[1];
  res = 360 + Math.round(degrees(Math.atan2(dx, dy)));
  return res % 360;
};

//merp = (y1,y2,i,x1=0,x2=1) -> map i,x1,x2,y1,y2
// interpolate = (a, b, c, d, value) -> c + value/b * (d-c)
// ass 16, interpolate 0,1024,0,256,64
// ass 240, interpolate 0,1024,256,0,64
getParameters = function(h = window.location.href) {
  var arr, f, s;
  h = decodeURI(h);
  arr = h.split('?');
  if (arr.length !== 2) {
    return {};
  }
  s = arr[1];
  if (s === '') {
    return {};
  }
  return _.object((function() {
    var i, len, ref, results;
    ref = s.split('&');
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      f = ref[i];
      results.push(f.split('='));
    }
    return results;
  })());
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcdXRpbHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUE7O0FBQUEsS0FBQSxHQUFRLENBQUMsQ0FBQzs7QUFDVixHQUFBLEdBQU0sUUFBQSxDQUFDLENBQUQsRUFBRyxJQUFFLElBQUwsQ0FBQTtTQUFjLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBWixDQUFzQixDQUF0QixFQUF5QixDQUF6QjtBQUFkOztBQUNOLE9BQUEsR0FBVSxRQUFBLENBQUMsQ0FBRCxFQUFHLE1BQUksQ0FBUCxDQUFBO1NBQWEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxDQUFBLEdBQUUsRUFBQSxJQUFJLEdBQWpCLENBQUEsR0FBc0IsRUFBQSxJQUFJO0FBQXZDOztBQUNWLEdBQUEsQ0FBSSxFQUFKLEVBQU8sT0FBQSxDQUFRLEVBQVIsRUFBVyxDQUFDLENBQVosQ0FBUDs7QUFFQSxHQUFBLEdBQU0sUUFBQSxDQUFDLENBQUQsRUFBSSxFQUFKLEVBQVEsRUFBUixFQUFZLEVBQVosRUFBZ0IsRUFBaEIsQ0FBQTtTQUF1QixDQUFDLENBQUEsR0FBSSxFQUFMLENBQUEsR0FBVyxDQUFDLEVBQUEsR0FBSyxFQUFOLENBQVgsR0FBdUIsQ0FBQyxFQUFBLEdBQUssRUFBTixDQUF2QixHQUFtQztBQUExRDs7QUFDTixHQUFBLENBQUksR0FBSixFQUFRLEdBQUEsQ0FBSSxHQUFKLEVBQVEsR0FBUixFQUFZLEdBQVosRUFBZ0IsR0FBaEIsRUFBb0IsR0FBcEIsQ0FBUjs7QUFDQSxHQUFBLENBQUksR0FBSixFQUFRLEdBQUEsQ0FBSSxHQUFKLEVBQVEsR0FBUixFQUFZLEdBQVosRUFBZ0IsR0FBaEIsRUFBb0IsR0FBcEIsQ0FBUjs7QUFFQSxPQUFBLEdBQVUsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUFPLENBQUEsR0FBSSxHQUFKLEdBQVUsSUFBSSxDQUFDO0FBQXRCOztBQUNWLE9BQUEsR0FBVSxRQUFBLENBQUMsQ0FBRCxDQUFBO1NBQU8sQ0FBQSxHQUFJLElBQUksQ0FBQyxFQUFULEdBQWM7QUFBckI7O0FBRVYsUUFBQSxHQUFXLFFBQUEsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBO0FBQ1YsTUFBQSxFQUFBLEVBQUE7RUFBQSxJQUFHLENBQUMsQ0FBQyxNQUFGLEtBQVksQ0FBWixJQUFpQixDQUFDLENBQUMsTUFBRixLQUFZLENBQWhDO0FBQXVDLFdBQU8sRUFBOUM7O0VBQ0EsRUFBQSxHQUFLLENBQUUsQ0FBQSxDQUFBLENBQUYsR0FBTyxDQUFFLENBQUEsQ0FBQTtFQUNkLEVBQUEsR0FBSyxDQUFFLENBQUEsQ0FBQSxDQUFGLEdBQU8sQ0FBRSxDQUFBLENBQUE7U0FDZCxJQUFJLENBQUMsSUFBTCxDQUFVLEVBQUEsR0FBSyxFQUFMLEdBQVUsRUFBQSxHQUFLLEVBQXpCO0FBSlU7O0FBTVgsT0FBQSxHQUFVLFFBQUEsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBO0FBQ1QsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0VBQUEsSUFBRyxDQUFDLENBQUMsTUFBRixLQUFVLENBQVYsSUFBZSxDQUFDLENBQUMsTUFBRixLQUFVLENBQTVCO0FBQW1DLFdBQU8sRUFBMUM7O0VBQ0EsRUFBQSxHQUFLLENBQUUsQ0FBQSxDQUFBLENBQUYsR0FBTyxDQUFFLENBQUEsQ0FBQTtFQUNkLEVBQUEsR0FBSyxDQUFFLENBQUEsQ0FBQSxDQUFGLEdBQU8sQ0FBRSxDQUFBLENBQUE7RUFDZCxHQUFBLEdBQU0sR0FBQSxHQUFNLElBQUksQ0FBQyxLQUFMLENBQVcsT0FBQSxDQUFRLElBQUksQ0FBQyxLQUFMLENBQVcsRUFBWCxFQUFjLEVBQWQsQ0FBUixDQUFYO1NBQ1osR0FBQSxHQUFNO0FBTEcsRUFsQlY7Ozs7OztBQThCQSxhQUFBLEdBQWdCLFFBQUEsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBckIsQ0FBQTtBQUNmLE1BQUEsR0FBQSxFQUFBLENBQUEsRUFBQTtFQUFBLENBQUEsR0FBSSxTQUFBLENBQVUsQ0FBVjtFQUNKLEdBQUEsR0FBTSxDQUFDLENBQUMsS0FBRixDQUFRLEdBQVI7RUFDTixJQUFHLEdBQUcsQ0FBQyxNQUFKLEtBQWMsQ0FBakI7QUFBd0IsV0FBTyxDQUFBLEVBQS9COztFQUNBLENBQUEsR0FBSSxHQUFJLENBQUEsQ0FBQTtFQUNSLElBQUcsQ0FBQSxLQUFHLEVBQU47QUFBYyxXQUFPLENBQUEsRUFBckI7O1NBQ0EsQ0FBQyxDQUFDLE1BQUY7O0FBQXFCO0FBQUE7SUFBQSxLQUFBLHFDQUFBOzttQkFBWixDQUFDLENBQUMsS0FBRixDQUFRLEdBQVI7SUFBWSxDQUFBOztNQUFyQjtBQU5lIiwic291cmNlc0NvbnRlbnQiOlsicmFuZ2UgPSBfLnJhbmdlXHJcbmFzcyA9IChhLGI9dHJ1ZSkgLT4gY2hhaS5hc3NlcnQuZGVlcEVxdWFsIGEsIGJcclxubXlSb3VuZCA9ICh4LGRlYz0wKSAtPiBNYXRoLnJvdW5kKHgqMTAqKmRlYykvMTAqKmRlY1xyXG5hc3MgNTAsbXlSb3VuZCA0NywtMVxyXG5cclxubWFwID0gKHgsIHgwLCB4MSwgeTAsIHkxKSAtPiAoeCAtIHgwKSAvICh4MSAtIHgwKSAqICh5MSAtIHkwKSArIHkwXHJcbmFzcyAzMjUsbWFwIDE1MCwxMDAsMjAwLDMwMCwzNTBcclxuYXNzIDM3NSxtYXAgMjUwLDEwMCwyMDAsMzAwLDM1MFxyXG5cclxuZGVncmVlcyA9ICh4KSAtPiB4ICogMTgwIC8gTWF0aC5QSVxyXG5yYWRpYW5zID0gKHgpIC0+IHggKiBNYXRoLlBJIC8gMTgwXHJcblxyXG5kaXN0YW5jZSA9IChwLHEpIC0+XHJcblx0aWYgcC5sZW5ndGggIT0gMiBvciBxLmxlbmd0aCAhPSAyIHRoZW4gcmV0dXJuIDBcclxuXHRkeCA9IHBbMF0gLSBxWzBdXHJcblx0ZHkgPSBwWzFdIC0gcVsxXVxyXG5cdE1hdGguc3FydCBkeCAqIGR4ICsgZHkgKiBkeVxyXG5cclxuYmVhcmluZyA9IChwLHEpIC0+XHJcblx0aWYgcC5sZW5ndGghPTIgb3IgcS5sZW5ndGghPTIgdGhlbiByZXR1cm4gMFxyXG5cdGR4ID0gcVswXSAtIHBbMF1cclxuXHRkeSA9IHFbMV0gLSBwWzFdXHJcblx0cmVzID0gMzYwICsgTWF0aC5yb3VuZCBkZWdyZWVzIE1hdGguYXRhbjIgZHgsZHlcclxuXHRyZXMgJSAzNjBcclxuXHJcbiNtZXJwID0gKHkxLHkyLGkseDE9MCx4Mj0xKSAtPiBtYXAgaSx4MSx4Mix5MSx5MlxyXG4jIGludGVycG9sYXRlID0gKGEsIGIsIGMsIGQsIHZhbHVlKSAtPiBjICsgdmFsdWUvYiAqIChkLWMpXHJcbiMgYXNzIDE2LCBpbnRlcnBvbGF0ZSAwLDEwMjQsMCwyNTYsNjRcclxuIyBhc3MgMjQwLCBpbnRlcnBvbGF0ZSAwLDEwMjQsMjU2LDAsNjRcclxuXHJcbmdldFBhcmFtZXRlcnMgPSAoaCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmKSAtPlxyXG5cdGggPSBkZWNvZGVVUkkgaFxyXG5cdGFyciA9IGguc3BsaXQoJz8nKVxyXG5cdGlmIGFyci5sZW5ndGggIT0gMiB0aGVuIHJldHVybiB7fVxyXG5cdHMgPSBhcnJbMV1cclxuXHRpZiBzPT0nJyB0aGVuIHJldHVybiB7fVxyXG5cdF8ub2JqZWN0KGYuc3BsaXQgJz0nIGZvciBmIGluIHMuc3BsaXQoJyYnKSlcclxuIl19
//# sourceURL=c:\github\2021\013-gpsKarta2\coffee\utils.coffee