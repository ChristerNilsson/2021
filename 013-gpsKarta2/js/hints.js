// Generated by CoffeeScript 2.4.1
var curr, diffToWord, elapsedTime, ended, endingTime, findNearest, hints, initSpeaker, lastETA, lastSpoken, lastWord, makeHints, say, sayETA, sayHint, speaker, started, startingTime, userDistance, voices,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

curr = 0;

lastWord = '';

lastSpoken = '';

speaker = null;

hints = {};

started = false;

ended = false;

startingTime = null;

endingTime = null;

elapsedTime = 0;

userDistance = 0;

voices = null;

lastETA = 0;

window.speechSynthesis.onvoiceschanged = function() {
  return voices = window.speechSynthesis.getVoices();
};

initSpeaker = function() {
  var index;
  index = 5;
  speaker = new SpeechSynthesisUtterance();
  speaker.voiceURI = "native";
  speaker.volume = 1;
  speaker.rate = 1.0;
  speaker.pitch = 0;
  speaker.text = '';
  speaker.lang = 'en-GB';
  if (voices && index <= voices.length - 1) {
    speaker.voice = voices[index];
  }
  messages.push("Welcome! Gustav");
  return say("Welcome! Gustav");
};

say = function(m) {
  if (speaker === null) {
    return;
  }
  speechSynthesis.cancel();
  speaker.text = m;
  return speechSynthesis.speak(speaker);
};

diffToWord = function(diff) {
  var WORDS;
  WORDS = ['turn around', 'sharp left', 'medium left', 'left', '', 'right', 'medium right', 'sharp right', 'turn around'];
  return WORDS[4 + Math.round(diff / 45)];
};

ass('turn around', diffToWord(-180));

ass('sharp left', diffToWord(-157));

ass('sharp left', diffToWord(-113));

ass('left', diffToWord(-67));

ass('left', diffToWord(-23));

ass('', diffToWord(-22));

ass('', diffToWord(22));

ass('right', diffToWord(23));

ass('right', diffToWord(67));

ass('medium right', diffToWord(68));

ass('medium right', diffToWord(112));

ass('sharp right', diffToWord(113));

ass('sharp right', diffToWord(157));

ass('turn around', diffToWord(158));

ass('turn around', diffToWord(180));

sayETA = function(gpsPoints) {
  var ETA, n, usedTime;
  if (gpsPoints.length < 2) {
    return;
  }
  if (startingTime === null) {
    return;
  }
  if (currentPath.distance === 0) {
    return;
  }
  n = gpsPoints.length;
  userDistance += distance(gpsPoints[n - 2], gpsPoints[n - 1]);
  //if userDistance == 0 then return 
  if (userDistance / currentPath.distance > 0.1) {
    usedTime = new Date() - startingTime;
    ETA = usedTime * currentPath.distance / userDistance;
    ETA = Math.round(ETA / 1000);
    if (10 <= abs(ETA - lastETA)) {
      messages.push(`ETA ${curr} ${Math.floor(ETA / 60)}m ${ETA % 60}s`);
      return lastETA = ETA; // seconds
    }
  }
};

sayHint = function(gpsPoints) {
  var N, dist, gps, last, points, word;
  N = 5;
  if (!currentPath || gpsPoints.length === 0) {
    return;
  }
  points = currentPath.points;
  last = gpsPoints.length - 1;
  gps = gpsPoints[last];
  [curr, dist] = findNearest(gps, points);
  if (started && !ended) {
    messages.push(`gps ${curr} ${dist}`);
  }
  word = '';
  if (!started && dist < 25 && curr === 0) {
    started = true;
    startingTime = new Date();
    say('track started');
    messages.push(`trackStarted ${startingTime}`);
    userDistance = 0;
    return;
  }
  if (started && !ended && curr === points.length - 1) {
    ended = true;
    endingTime = new Date();
    elapsedTime = endingTime - startingTime;
    messages.push(`elapsedTime ${elapsedTime}`);
    say('track ended');
    return;
  }
  if (!started) {
    return;
  }
  if (ended) {
    return;
  }
  sayETA(gpsPoints);
  if (dist > 25) { // meters
    word = 'no track';
  } else {
    if (curr + N in hints) {
      word = hints[curr + N];
      messages.push(`hint ${curr} ${points[curr]} ${word} ${dist}`);
    } else {
      word = '';
    }
  }
  if (lastSpoken !== word) {
    messages.push(`word ${word}`);
    say(word);
    return lastSpoken = word;
  }
};

findNearest = function(p1, polygon) {
  var best, d, dx, dy, i, index, j, len, p, ref, x, y;
  index = 0;
  [x, y] = p1;
  p = polygon[0];
  dx = p[0] - x;
  dy = p[1] - y;
  best = dx * dx + dy * dy;
  ref = range(polygon.length);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    p = polygon[i];
    dx = p[0] - x;
    dy = p[1] - y;
    d = dx * dx + dy * dy;
    if (d < best) {
      best = d;
      index = i;
    }
  }
  return [index, Math.round(Math.sqrt(best))];
};

makeHints = function() {
  var b0, b1, diff, i, j, len, points, ref, word;
  console.log('makeHints');
  hints = {};
  points = currentPath.points;
  console.log(points);
  ref = range(2, points.length - 3);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    b0 = bearing(points[i - 2], points[i]);
    b1 = bearing(points[i], points[i + 2]);
    diff = b1 - b0 + 180;
    diff = modulo(diff, 360) - 180;
    word = diffToWord(diff);
    if (word !== '') {
      hints[i] = word;
    }
  }
  //console.log "#{i} #{points[i]} #{b0} #{b1} #{diff} #{word}"
  //messages.push "#{i} #{word}"
  return console.log(hints);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGludHMuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcaGludHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLElBQUEsRUFBQSxVQUFBLEVBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxVQUFBLEVBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxXQUFBLEVBQUEsT0FBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsWUFBQSxFQUFBLFlBQUEsRUFBQSxNQUFBO0VBQUE7O0FBQUEsSUFBQSxHQUFPOztBQUNQLFFBQUEsR0FBVzs7QUFDWCxVQUFBLEdBQWE7O0FBQ2IsT0FBQSxHQUFVOztBQUNWLEtBQUEsR0FBUSxDQUFBOztBQUVSLE9BQUEsR0FBVTs7QUFDVixLQUFBLEdBQVE7O0FBQ1IsWUFBQSxHQUFlOztBQUNmLFVBQUEsR0FBYTs7QUFDYixXQUFBLEdBQWM7O0FBQ2QsWUFBQSxHQUFlOztBQUVmLE1BQUEsR0FBUzs7QUFDVCxPQUFBLEdBQVU7O0FBRVYsTUFBTSxDQUFDLGVBQWUsQ0FBQyxlQUF2QixHQUF5QyxRQUFBLENBQUEsQ0FBQTtTQUFHLE1BQUEsR0FBUyxNQUFNLENBQUMsZUFBZSxDQUFDLFNBQXZCLENBQUE7QUFBWjs7QUFFekMsV0FBQSxHQUFjLFFBQUEsQ0FBQSxDQUFBO0FBQ2IsTUFBQTtFQUFBLEtBQUEsR0FBUTtFQUNSLE9BQUEsR0FBVSxJQUFJLHdCQUFKLENBQUE7RUFDVixPQUFPLENBQUMsUUFBUixHQUFtQjtFQUNuQixPQUFPLENBQUMsTUFBUixHQUFpQjtFQUNqQixPQUFPLENBQUMsSUFBUixHQUFlO0VBQ2YsT0FBTyxDQUFDLEtBQVIsR0FBZ0I7RUFDaEIsT0FBTyxDQUFDLElBQVIsR0FBZTtFQUNmLE9BQU8sQ0FBQyxJQUFSLEdBQWU7RUFDZixJQUFHLE1BQUEsSUFBVyxL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QSxDQUFRLE1BQU8sQ0FBQSxDQUFBLENBQWYsRUFBa0IsTUFBTyxDQUFBLENBQUEsR0FBRSxDQUFGLENBQXpCO0lBQ0wsSUFBQSxHQUFPLEVBQUEsR0FBSyxFQUFMLEdBQVU7SUFDakIsSUFBQSxVQUFPLE1BQVEsSUFBUixHQUFjO0lBRXJCLElBQUEsR0FBTyxVQUFBLENBQVcsSUFBWDtJQUNQLElBQUcsSUFBQSxLQUFRLEVBQVg7TUFBbUIsS0FBTSxDQUFBLENBQUEsQ0FBTixHQUFXLEtBQTlCOztFQVBELENBSkE7OztTQWNBLE9BQU8sQ0FBQyxHQUFSLENBQVksS0FBWjtBQWZXIiwic291cmNlc0NvbnRlbnQiOlsiY3VyciA9IDBcclxubGFzdFdvcmQgPSAnJ1xyXG5sYXN0U3Bva2VuID0gJydcclxuc3BlYWtlciA9IG51bGxcclxuaGludHMgPSB7fVxyXG5cclxuc3RhcnRlZCA9IGZhbHNlXHJcbmVuZGVkID0gZmFsc2Vcclxuc3RhcnRpbmdUaW1lID0gbnVsbFxyXG5lbmRpbmdUaW1lID0gbnVsbFxyXG5lbGFwc2VkVGltZSA9IDBcclxudXNlckRpc3RhbmNlID0gMFxyXG5cclxudm9pY2VzID0gbnVsbFxyXG5sYXN0RVRBID0gMFxyXG5cclxud2luZG93LnNwZWVjaFN5bnRoZXNpcy5vbnZvaWNlc2NoYW5nZWQgPSAtPiB2b2ljZXMgPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpXHJcblxyXG5pbml0U3BlYWtlciA9IC0+XHJcblx0aW5kZXggPSA1XHJcblx0c3BlYWtlciA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoKVxyXG5cdHNwZWFrZXIudm9pY2VVUkkgPSBcIm5hdGl2ZVwiXHJcblx0c3BlYWtlci52b2x1bWUgPSAxXHJcblx0c3BlYWtlci5yYXRlID0gMS4wXHJcblx0c3BlYWtlci5waXRjaCA9IDBcclxuXHRzcGVha2VyLnRleHQgPSAnJ1xyXG5cdHNwZWFrZXIubGFuZyA9ICdlbi1HQidcclxuXHRpZiB2b2ljZXMgYW5kIGluZGV4IDw9IHZvaWNlcy5sZW5ndGgtMSB0aGVuIHNwZWFrZXIudm9pY2UgPSB2b2ljZXNbaW5kZXhdXHJcblx0bWVzc2FnZXMucHVzaCBcIldlbGNvbWUhIEd1c3RhdlwiXHJcblx0c2F5IFwiV2VsY29tZSEgR3VzdGF2XCJcclxuXHJcbnNheSA9IChtKSAtPlxyXG5cdGlmIHNwZWFrZXIgPT0gbnVsbCB0aGVuIHJldHVyblxyXG5cdHNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKVxyXG5cdHNwZWFrZXIudGV4dCA9IG1cclxuXHRzcGVlY2hTeW50aGVzaXMuc3BlYWsgc3BlYWtlclxyXG5cclxuZGlmZlRvV29yZCA9IChkaWZmKSAtPlxyXG5cdFdPUkRTID0gWyd0dXJuIGFyb3VuZCcsJ3NoYXJwIGxlZnQnLCdtZWRpdW0gbGVmdCcsJ2xlZnQnLCcnLCdyaWdodCcsJ21lZGl1bSByaWdodCcsJ3NoYXJwIHJpZ2h0JywndHVybiBhcm91bmQnXVxyXG5cdFdPUkRTWzQgKyBNYXRoLnJvdW5kIGRpZmYvNDVdXHJcbmFzcyAndHVybiBhcm91bmQnLGRpZmZUb1dvcmQgLTE4MFxyXG5hc3MgJ3NoYXJwIGxlZnQnLGRpZmZUb1dvcmQgLTE1N1xyXG5hc3MgJ3NoYXJwIGxlZnQnLGRpZmZUb1dvcmQgLTExM1xyXG5hc3MgJ2xlZnQnLGRpZmZUb1dvcmQgLTY3XHJcbmFzcyAnbGVmdCcsZGlmZlRvV29yZCAtMjNcclxuYXNzICcnLGRpZmZUb1dvcmQgLTIyXHJcbmFzcyAnJyxkaWZmVG9Xb3JkIDIyXHJcbmFzcyAncmlnaHQnLGRpZmZUb1dvcmQgMjNcclxuYXNzICdyaWdodCcsZGlmZlRvV29yZCA2N1xyXG5hc3MgJ21lZGl1bSByaWdodCcsZGlmZlRvV29yZCA2OFxyXG5hc3MgJ21lZGl1bSByaWdodCcsZGlmZlRvV29yZCAxMTJcclxuYXNzICdzaGFycCByaWdodCcsZGlmZlRvV29yZCAxMTNcclxuYXNzICdzaGFycCByaWdodCcsZGlmZlRvV29yZCAxNTdcclxuYXNzICd0dXJuIGFyb3VuZCcsZGlmZlRvV29yZCAxNThcclxuYXNzICd0dXJuIGFyb3VuZCcsZGlmZlRvV29yZCAxODBcclxuXHJcbnNheUVUQSA9IChncHNQb2ludHMpIC0+XHJcblx0aWYgZ3BzUG9pbnRzLmxlbmd0aCA8IDIgdGhlbiByZXR1cm4gXHJcblx0aWYgc3RhcnRpbmdUaW1lID09IG51bGwgdGhlbiByZXR1cm5cclxuXHRpZiBjdXJyZW50UGF0aC5kaXN0YW5jZSA9PSAwIHRoZW4gcmV0dXJuIFxyXG5cclxuXHRuID0gZ3BzUG9pbnRzLmxlbmd0aFxyXG5cdHVzZXJEaXN0YW5jZSArPSBkaXN0YW5jZSBncHNQb2ludHNbbi0yXSxncHNQb2ludHNbbi0xXVxyXG5cdCNpZiB1c2VyRGlzdGFuY2UgPT0gMCB0aGVuIHJldHVybiBcclxuXHRpZiB1c2VyRGlzdGFuY2UgLyBjdXJyZW50UGF0aC5kaXN0YW5jZSA+IDAuMVxyXG5cdFx0dXNlZFRpbWUgPSBuZXcgRGF0ZSgpIC0gc3RhcnRpbmdUaW1lXHJcblx0XHRFVEEgPSB1c2VkVGltZSAqIGN1cnJlbnRQYXRoLmRpc3RhbmNlIC8gdXNlckRpc3RhbmNlXHJcblx0XHRFVEEgPSBNYXRoLnJvdW5kIEVUQS8xMDAwXHJcblx0XHRpZiAxMCA8PSBhYnMgRVRBLWxhc3RFVEFcclxuXHRcdFx0bWVzc2FnZXMucHVzaCBcIkVUQSAje2N1cnJ9ICN7RVRBIC8vIDYwfW0gI3tFVEEgJSA2MH1zXCJcclxuXHRcdFx0bGFzdEVUQSA9IEVUQSAjIHNlY29uZHNcclxuXHJcbnNheUhpbnQgPSAoZ3BzUG9pbnRzKSAtPlxyXG5cdE4gPSA1XHJcblx0aWYgbm90IGN1cnJlbnRQYXRoIG9yIGdwc1BvaW50cy5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cdHBvaW50cyA9IGN1cnJlbnRQYXRoLnBvaW50c1xyXG5cdGxhc3QgPSBncHNQb2ludHMubGVuZ3RoLTFcclxuXHRncHMgPSBncHNQb2ludHNbbGFzdF1cclxuXHRbY3VycixkaXN0XSA9IGZpbmROZWFyZXN0IGdwcyxwb2ludHNcclxuXHRpZiBzdGFydGVkIGFuZCBub3QgZW5kZWQgdGhlbiBtZXNzYWdlcy5wdXNoIFwiZ3BzICN7Y3Vycn0gI3tkaXN0fVwiXHJcblx0d29yZCA9ICcnXHJcblxyXG5cdGlmIG5vdCBzdGFydGVkIGFuZCBkaXN0IDwgMjUgYW5kIGN1cnI9PTBcclxuXHRcdHN0YXJ0ZWQgPSB0cnVlXHJcblx0XHRzdGFydGluZ1RpbWUgPSBuZXcgRGF0ZSgpXHJcblx0XHRzYXkgJ3RyYWNrIHN0YXJ0ZWQnXHJcblx0XHRtZXNzYWdlcy5wdXNoIFwidHJhY2tTdGFydGVkICN7c3RhcnRpbmdUaW1lfVwiXHJcblx0XHR1c2VyRGlzdGFuY2UgPSAwXHJcblx0XHRyZXR1cm5cclxuXHJcblx0aWYgc3RhcnRlZCBhbmQgbm90IGVuZGVkIGFuZCBjdXJyID09IHBvaW50cy5sZW5ndGgtMVxyXG5cdFx0ZW5kZWQgPSB0cnVlXHJcblx0XHRlbmRpbmdUaW1lID0gbmV3IERhdGUoKVxyXG5cdFx0ZWxhcHNlZFRpbWUgPSBlbmRpbmdUaW1lIC0gc3RhcnRpbmdUaW1lXHJcblx0XHRtZXNzYWdlcy5wdXNoIFwiZWxhcHNlZFRpbWUgI3tlbGFwc2VkVGltZX1cIlxyXG5cdFx0c2F5ICd0cmFjayBlbmRlZCdcclxuXHRcdHJldHVyblxyXG5cclxuXHRpZiBub3Qgc3RhcnRlZCB0aGVuIHJldHVyblxyXG5cdGlmIGVuZGVkIHRoZW4gcmV0dXJuXHJcblxyXG5cdHNheUVUQSBncHNQb2ludHNcclxuXHJcblx0aWYgZGlzdCA+IDI1ICMgbWV0ZXJzXHJcblx0XHR3b3JkID0gJ25vIHRyYWNrJ1xyXG5cdGVsc2VcclxuXHRcdGlmIGN1cnIrTiBvZiBoaW50c1xyXG5cdFx0XHR3b3JkID0gaGludHNbY3VycitOXVxyXG5cdFx0XHRtZXNzYWdlcy5wdXNoIFwiaGludCAje2N1cnJ9ICN7cG9pbnRzW2N1cnJdfSAje3dvcmR9ICN7ZGlzdH1cIlxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR3b3JkID0gJydcclxuXHRpZiBsYXN0U3Bva2VuICE9IHdvcmRcclxuXHRcdG1lc3NhZ2VzLnB1c2ggXCJ3b3JkICN7d29yZH1cIlxyXG5cdFx0c2F5IHdvcmRcclxuXHRcdGxhc3RTcG9rZW4gPSB3b3JkXHJcblxyXG5maW5kTmVhcmVzdCA9IChwMSxwb2x5Z29uKSAtPlxyXG5cdGluZGV4ID0gMFxyXG5cdFt4LHldID0gcDFcclxuXHRwID0gcG9seWdvblswXVxyXG5cdGR4ID0gcFswXSAtIHhcclxuXHRkeSA9IHBbMV0gLSB5XHJcblx0YmVzdCA9IGR4KmR4ICsgZHkqZHlcclxuXHRmb3IgaSBpbiByYW5nZSBwb2x5Z29uLmxlbmd0aFxyXG5cdFx0cCA9IHBvbHlnb25baV1cclxuXHRcdGR4ID0gcFswXSAtIHhcclxuXHRcdGR5ID0gcFsxXSAtIHlcclxuXHRcdGQgPSBkeCpkeCArIGR5KmR5XHJcblx0XHRpZiBkIDwgYmVzdFxyXG5cdFx0XHRiZXN0ID0gZFxyXG5cdFx0XHRpbmRleCA9IGlcclxuXHRbaW5kZXgsIE1hdGgucm91bmQgTWF0aC5zcXJ0IGJlc3RdXHJcblxyXG5tYWtlSGludHMgPSAtPlxyXG5cdGNvbnNvbGUubG9nICdtYWtlSGludHMnXHJcblx0aGludHMgPSB7fVxyXG5cdHBvaW50cyA9IGN1cnJlbnRQYXRoLnBvaW50c1xyXG5cdGNvbnNvbGUubG9nIHBvaW50c1xyXG5cdGZvciBpIGluIHJhbmdlIDIscG9pbnRzLmxlbmd0aCAtIDNcclxuXHRcdGIwID0gYmVhcmluZyBwb2ludHNbaS0yXSxwb2ludHNbaV1cclxuXHRcdGIxID0gYmVhcmluZyBwb2ludHNbaV0scG9pbnRzW2krMl1cclxuXHRcdGRpZmYgPSBiMSAtIGIwICsgMTgwXHJcblx0XHRkaWZmID0gZGlmZiAlJSAzNjAgLSAxODBcclxuXHJcblx0XHR3b3JkID0gZGlmZlRvV29yZCBkaWZmXHJcblx0XHRpZiB3b3JkICE9ICcnIHRoZW4gaGludHNbaV0gPSB3b3JkXHJcblx0XHRcdCNjb25zb2xlLmxvZyBcIiN7aX0gI3twb2ludHNbaV19ICN7YjB9ICN7YjF9ICN7ZGlmZn0gI3t3b3JkfVwiXHJcblx0XHRcdCNtZXNzYWdlcy5wdXNoIFwiI3tpfSAje3dvcmR9XCJcclxuXHRjb25zb2xlLmxvZyBoaW50c1xyXG4iXX0=
//# sourceURL=c:\github\2021\013-gpsKarta2\coffee\hints.coffee