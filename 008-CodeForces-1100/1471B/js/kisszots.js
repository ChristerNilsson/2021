// Generated by CoffeeScript 2.4.1
var A, _, a, b, i, iters, j, k, l, len, min, mult, mults, n, nr, nrs, nx, ref, ref1, sum, x;

nrs = function() {
  var i, j, len, ref, results;
  ref = readline().split(' ');
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    results.push(parseInt(i));
  }
  return results;
};

nr = function() {
  return nrs()[0];
};

min = function(arr) {
  var best, item, j, len;
  best = arr[0];
  for (j = 0, len = arr.length; j < len; j++) {
    item = arr[j];
    if (item < best) {
      best = item;
    }
  }
  return best;
};

for (_ = j = 0, ref = nr(); (0 <= ref ? j < ref : j > ref); _ = 0 <= ref ? ++j : --j) {
  nx = nrs();
  n = nx[0];
  x = nx[1];
  A = nrs();
  a = A.shift();
  mult = 0;
  mults = [];
  while (a % Math.pow(x, mult + 1) === 0) {
    mult += 1;
  }
  mults.push(mult);
  for (k = 0, len = A.length; k < len; k++) {
    b = A[k];
    while (b % Math.pow(x, mult)) {
      mult -= 1;
    }
    mults.push(mult);
  }
  iters = 1 + min(mults);
  A.unshift(a);
  sum = 0;
  for (i = l = 0, ref1 = A.length; (0 <= ref1 ? l < ref1 : l > ref1); i = 0 <= ref1 ? ++l : --l) {
    sum += A[i] * (Math.min(iters, mults[i]) + 1);
  }
  print(sum);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2lzc3pvdHMuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxca2lzc3pvdHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUE7O0FBQUEsR0FBQSxHQUFNLFFBQUEsQ0FBQSxDQUFBO0FBQUcsTUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7QUFBVztBQUFBO0VBQUEsS0FBQSxxQ0FBQTs7aUJBQVgsUUFBQSxDQUFTLENBQVQ7RUFBVyxDQUFBOztBQUFkOztBQUNOLEVBQUEsR0FBSyxRQUFBLENBQUEsQ0FBQTtTQUFHLEdBQUEsQ0FBQSxDQUFNLENBQUEsQ0FBQTtBQUFUOztBQUVMLEdBQUEsR0FBTSxRQUFBLENBQUMsR0FBRCxDQUFBO0FBQ0wsTUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQTtFQUFBLElBQUEsR0FBTyxHQUFJLENBQUEsQ0FBQTtFQUNYLEtBQUEscUNBQUE7O0lBQ0MsSUFBRyxJQUFBLEdBQU8sSUFBVjtNQUFvQixJQUFBLEdBQUssS0FBekI7O0VBREQ7U0FFQTtBQUpLOztBQU1OLEtBQVMsK0VBQVQ7RUFDQyxFQUFBLEdBQUssR0FBQSxDQUFBO0VBQ0wsQ0FBQSxHQUFJLEVBQUcsQ0FBQSxDQUFBO0VBQ1AsQ0FBQSxHQUFJLEVBQUcsQ0FBQSxDQUFBO0VBQ1AsQ0FBQSxHQUFJLEdBQUEsQ0FBQTtFQUVKLENBQUEsR0FBSSxDQUFDLENBQUMsS0FBRixDQUFBO0VBQ0osSUFBQSxHQUFPO0VBQ1AsS0FBQSxHQUFRO0FBQ1IsU0FBTSxDQUFBLEdBQUksSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVcsSUFBQSxHQUFLLENBQWhCLENBQUosS0FBMEIsQ0FBaEM7SUFDQyxJQUFBLElBQU07RUFEUDtFQUVBLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBWDtFQUNBLEtBQUEsbUNBQUE7O0FBQ0MsV0FBTSxDQUFBLEdBQUksSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVcsSUFBWCxDQUFWO01BQ0MsSUFBQSxJQUFRO0lBRFQ7SUFFQSxLQUFLLENBQUMsSUFBTixDQUFXLElBQVg7RUFIRDtFQUlBLEtBQUEsR0FBUSxDQUFBLEdBQUksR0FBQSxDQUFJLEtBQUo7RUFDWixDQUFDLENBQUMsT0FBRixDQUFVLENBQVY7RUFFQSxHQUFBLEdBQU07RUFDTixLQUFTLHdGQUFUO0lBQ0MsR0FBQSxJQUFPLENBQUUsQ0FBQSxDQUFBLENBQUYsR0FBTyxDQUFDLElBQUksQ0FBQyxHQUFMLENBQVMsS0FBVCxFQUFlLEtBQU0sQ0FBQSxDQUFBLENBQXJCLENBQUEsR0FBeUIsQ0FBMUI7RUFEZjtFQUVBLEtBQUEsQ0FBTSxHQUFOO0FBdEJEIiwic291cmNlc0NvbnRlbnQiOlsibnJzID0gLT4gcGFyc2VJbnQgaSBmb3IgaSBpbiByZWFkbGluZSgpLnNwbGl0ICcgJ1xyXG5uciA9IC0+IG5ycygpWzBdXHJcblxyXG5taW4gPSAoYXJyKSAtPlxyXG5cdGJlc3QgPSBhcnJbMF1cclxuXHRmb3IgaXRlbSBpbiBhcnJcclxuXHRcdGlmIGl0ZW0gPCBiZXN0IHRoZW4gYmVzdD1pdGVtXHJcblx0YmVzdFxyXG5cclxuZm9yIF8gaW4gWzAuLi5ucigpXVxyXG5cdG54ID0gbnJzKClcclxuXHRuID0gbnhbMF1cclxuXHR4ID0gbnhbMV1cclxuXHRBID0gbnJzKClcclxuXHJcblx0YSA9IEEuc2hpZnQoKVxyXG5cdG11bHQgPSAwXHJcblx0bXVsdHMgPSBbXVxyXG5cdHdoaWxlIGEgJSBNYXRoLnBvdyh4LG11bHQrMSkgPT0gMFxyXG5cdFx0bXVsdCs9MVxyXG5cdG11bHRzLnB1c2ggbXVsdFxyXG5cdGZvciBiIGluIEFcclxuXHRcdHdoaWxlIGIgJSBNYXRoLnBvdyh4LG11bHQpXHJcblx0XHRcdG11bHQgLT0gMVxyXG5cdFx0bXVsdHMucHVzaCBtdWx0XHJcblx0aXRlcnMgPSAxICsgbWluIG11bHRzXHJcblx0QS51bnNoaWZ0IGFcclxuXHJcblx0c3VtID0gMFxyXG5cdGZvciBpIGluIFswLi4uQS5sZW5ndGhdXHJcblx0XHRzdW0gKz0gQVtpXSAqIChNYXRoLm1pbihpdGVycyxtdWx0c1tpXSkrMSlcclxuXHRwcmludCBzdW1cclxuIl19
//# sourceURL=c:\github\2021\008-CodeForces-1100\1471B\coffee\kisszots.coffee